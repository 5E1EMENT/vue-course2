<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>course-2</title>
    <style>
      *{padding:0;margin:0;list-style:none;}
      body{padding:20px;}
      li{margin:5px;background:crimson;color:white;font-size:24px;padding:5px;border-radius:5px}
    </style>
  </head>
  <body>
    <div id="app"></div>
    <ul id='ul'></ul>
    <!-- built files will be auto injected -->
  </body>
  <script type='text/javascript'>
    var ajax = new XMLHttpRequest()
    var ul = document.getElementById('ul')
    function request(){
      var url = './server.php'
      ajax.onreadystatechange = response
      ajax.open('POST',url,true)
      ajax.setRequestHeader('Content-Type','application/x-www-form-urlencoded')
      ajax.send('range=all')
    }
    function response(){
      if(ajax.readyState == 4){
        if(ajax.status == 200){
          var result = JSON.parse(ajax.responseText)
          if(result[0]){
            // true, rows retrieved
            var row_total = result[1].length
            ul.innerHTML=""
            for(i=0;i<row_total;i++){
              li_content = "Brand is: "+result[1][i].brand+" and Model is: "+result[1][i].model
              make_list_item(li_content,ul)
            }
          }else{
            // false, no row retrieved
            ul.innerHTML=""
            make_list_item(result[1],ul)
          }
        }
      }
    }
    function make_list_item(list_item_content,parent_element){
      var li = document.createElement('li')
      li.append(list_item_content)
      parent_element.appendChild(li)
    }
    //request()
    setInterval(function(){request()},1000)



  </script>
</html>
